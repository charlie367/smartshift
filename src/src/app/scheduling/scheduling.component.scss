

/* =========================
   Variables
   ========================= */
   $sidebar-w: 220px;            // Sidebar fixed width
   $sidebar-offset: 240px;       // Content offset used in several blocks
   $header-offset: 120px;        // Spacing to clear fixed top bar
   $card-radius: 12px;           // Card border radius
   $panel-radius: 16px;          // Larger panel radius
   $shadow-1: 0 4px 12px rgba(0,0,0,0.1);
   $shadow-2: 0 8px 24px rgba(0,0,0,.08);
   $brand-blue: #1976d2;
   $brand-indigo: #3f51b5;
   $muted-bg: #f5f5f5;
   
   /* ===== Utilities (placeholders) ===== */
   %offset-left { margin-left: $sidebar-offset; }
   %mt-header { margin-top: $header-offset; }
   %mt-header-important { margin-top: $header-offset !important; }
   
   /* =========================
      Angular Material calendar overrides
      ========================= */
   ::ng-deep .mat-calendar-table { width: 138% !important; }
   ::ng-deep .mat-calendar-controls { width: 145% !important; }
   ::ng-deep .mat-calendar-body-cell-content { font-size: 13px !important; }
   ::ng-deep .mat-calendar-body-today { border: none !important; background: transparent !important; }
   
   /* =========================
      Calendar + Chat layout
      ========================= */
   .left-calendar { flex: 0 0 auto; }
   
   .calendar-container {
     @extend %offset-left;
     display: flex;
     justify-content: center;
     align-items: flex-start;
     gap: 20px;
     padding: 20px;
     max-width: 900px;
     margin-top: 20px;
     background: #fff;
     border-radius: $card-radius;
     box-shadow: $shadow-1;
     flex-wrap: wrap;
     border: 1px solid black;
   
     /* 在儀表板兩欄情境下的覆寫（滿版跨欄） */
     .dashboard-row & {
       grid-column: 1 / -1;
       width: 100%;
       margin: 0 !important;
       max-width: none !important;
       box-sizing: border-box;
     }
   }
   
   .title {
     width: 100%;
     margin: 0;
     text-align: left;
     font-size: 14px;
     font-weight: 600;
   }
   
   .right-week {
     flex: 1;
     display: flex;
     flex-direction: column;
     align-items: center;
   
     .week-header {
       display: flex;
       justify-content: center;
       align-items: center;
       margin-bottom: 20px;
       gap: 20px;
       font-weight: bold;
     }
     .week-grid { display: flex; justify-content: space-around; width: 80%; text-align: center; }
     .week-day { min-width: 80px; }
     .week-day .day-title { font-weight: bold; margin-bottom: 10px; }
     .week-day .day-slots { display: flex; flex-direction: column; gap: 10px; margin-left: 6px; }
   }
   
   .buttontime { height: 20%; width: 20%; }
   
   .chat-box {
     @extend %mt-header;
     @extend %offset-left;
     padding: 10px;
     border: 1px solid #ccc;
     border-radius: 8px;
     max-height: 200px;
     max-width: 920px;
     overflow-y: auto;
     background: #f9f9f9;
   
     /* 在儀表板兩欄情境下的覆寫：移除邊距、放寬寬度 */
     .dashboard-row & {
       margin: 0 !important;
       max-width: none !important;
     }
   }
   
   .user { text-align: right; color: blue; margin: 5px 0; }
   
   .assistant {
     text-align: left;
     color: green;
     margin: 5px 5px 5px 0; /* 原：5px 0 + margin-right:5px → 明確化 */
     display: flex;
     align-items: flex-start;
     gap: 10px;
   }
   
   .assistant-avatar { width: 75px; height: 75px; flex-shrink: 0; }
   
   /* =========================
      Sidebar & Top bar
      ========================= */
   .sidebar {
     position: fixed; left: 0; top: 0; bottom: 0;
     width: $sidebar-w; background: #fff; color: #444;
     display: flex; flex-direction: column; align-items: stretch;
     border-right: 1px solid #e5e7eb;
     margin-top: 0 !important;
   }
   
   .menu-item {
     width: 140px; margin: 0 20px; padding: 12px 20px;
     display: flex; align-items: center; justify-content: flex-start; gap: 8px;
     cursor: pointer; font-size: 15px; color: #444; border-radius: 8px; transition: all 0.2s;
   
     mat-icon {
       font-size: 20px; color: #666; min-width: 20px; text-align: center;
       display: inline-flex; align-items: center; line-height: 1;
       width: auto !important; height: auto !important; margin: 0 !important;
     }
   
     /* 合併 hover / active */
     &:hover,
     &.active {
       background: #e8f0fe;
       color: $brand-blue;
     }
     &:hover mat-icon,
     &.active mat-icon {
       color: $brand-blue;
     }
     &.active { font-weight: 600; }
   }
   
   .menu-item label { font-size: 16px; font-weight: 600; }
   
   .menu-item1 { margin: 20px 0; cursor: pointer; margin-left: auto; }
   .menu-item1 mat-icon {
     display: block;
     font-size: 26px;
     /* 移除 align-items（對 block 無效） */
   }
   .menu-item1 label { font-size: 16px; font-weight: 600; }
   
   .top-tag {
     position: fixed; top: 0; left: $sidebar-w + 1px;
     width: calc(100% - #{$sidebar-w + 1px});
     display: flex; align-items: center; justify-content: flex-end;
     padding: 12px 24px; background: rgba(255,255,255,0.6);
     backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
     z-index: 950; border-bottom: 1px solid rgba(0,0,0,0.15);
     box-sizing: border-box;
   }
   
   .tag-icon { width: 60px; height: 60px; align-self: center; }
   
   .logo-text {
     font-family: 'Montserrat', sans-serif; font-size: 19px; font-weight: 700;
     color: black; display: flex; align-items: center; justify-content: center;
     height: 75px; margin-top: 10px; margin-bottom: 20px;
   }
   
   /* =========================
      Clock embed / inline (right-aside)
      ========================= */
   .clock-body { display:flex; justify-content:center; align-items:center; padding: 16px; overflow: hidden; }
   .clock-inline { width: var(--clock-w, 160px); height: var(--clock-h, 160px); display: flex; justify-content: center; align-items: center; margin: 0 auto; }
   .clock-inline canvas, .clock-inline svg, .clock-inline img { width: 100% !important; height: 100% !important; display: block; }
   
   .salary-body { display: flex; justify-content: center; align-items: center; padding: 16px; }
   
   .schedule-wrapper {
     @extend %mt-header;
     @extend %offset-left;
     padding: 20px;
   }
   
   .divider { display: block; width: 100%; border: 0; border-top: 1px solid #e5e7eb; margin: 0 0 12px; }
   
   /* =========================
      Logout section
      ========================= */
   .logout-section { margin-top: auto; width: 100%; padding: 0; }
   .sidebar .logout-section { padding-bottom: 0 !important; }
   .sidebar .logout-section .menu-item.logout {
     padding: 12px 20px !important; margin: 0 20px 25px !important; border-radius: 8px;
   }
   .menu-item.logout, .menu-item.logout mat-icon { color: #e53935; }
   .menu-item.logout:hover { background: #fdecea; color: #b71c1c; }
   .menu-item.logout:hover mat-icon { color: #b71c1c; }
   
   /* =========================
      Month (attendance) card
      ========================= */
   .month-container {
     @extend %offset-left;
     background: #fff; border-radius: $card-radius; padding: 16px;
     box-shadow: $shadow-1;
     max-width: 1000px; margin-top: 20px;
     border: 1px solid black;
   }
   
   .month-header {
     display: flex; justify-content: center; align-items: center;
     font-weight: bold; font-size: 18px; color: $brand-indigo; margin-bottom: 16px;
   }
   .month-header .arrow { background: none; border: none; font-size: 20px; cursor: pointer; margin: 0 12px; }
   .month-header .month-title { display: flex; align-items: center; gap: 6px; }
   
   .stats-row { display: flex; justify-content: space-around; margin-bottom: 16px; }
   .stats-row .stat-card {
     display: flex; align-items: center; gap: 8px; padding: 12px; border-radius: 8px; color: #333;
     background: #f9f9f9; flex: 1; margin: 0 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.08);
   }
   .stats-row .stat-card .value { font-weight: bold; font-size: 16px; }
   .stats-row .stat-card .label { font-size: 12px; color: #777; }
   .stats-row .green mat-icon { color: #4caf50; }
   .stats-row .orange mat-icon { color: #ff9800; }
   .stats-row .purple mat-icon { color: #673ab7; }
   .stats-row .red mat-icon { color: #f44336; }
   
   .work-log-table-wrapper { max-height: 250px; overflow-y: auto; }
   .work-log-table { width: 100%; border-collapse: collapse; font-size: 14px; }
   .work-log-table th, .work-log-table td { padding: 10px; border-bottom: 1px solid #eee; text-align: left; }
   .work-log-table th { font-weight: bold; background: $muted-bg; }
   .work-log-table .checkin { color: #2196f3; font-weight: bold; }
   .work-log-table .checkout { color: #4caf50; font-weight: bold; }
   
   /* =========================
      Unified dashboard (two columns)
      ========================= */
   %dashboard-grid {
     display: grid;
     grid-template-columns: minmax(0, 1fr) 300px; /* left fluid, right fixed */
     gap: 20px;
     align-items: start;
   }
   
   .dashboard-row {
     @extend %dashboard-grid;
     @extend %mt-header-important; /* 保留 !important 行為 */
     margin-left: $sidebar-offset; /* clear sidebar */
     margin-right: 20px;
   }
   .left-col { display: flex; flex-direction: column; gap: 20px; }
   
   .dashboard-layout {
     @extend %dashboard-grid;
     margin-right: 20px;
     padding-bottom: 20px;
   }
   
   /* =========================
      Right aside / widgets
      ========================= */
   .right-aside { display: flex; flex-direction: column; gap: 31px; position: relative; z-index: 2; }
   .widget-card {
     background: #fff;
     border-radius: $panel-radius;
     border: 1px solid black;
     box-shadow: $shadow-2;
     overflow: hidden;
   }
   .widget-header {
     padding: 14px 16px; font-weight: 700; color: #2f5fd3; border-bottom: 1px solid #edf0f6;
     display: flex; justify-content: space-between; align-items: center;
   }
   .salary-value { color: black; font-weight: normal; font-size: 14px; }
   .widget-body { padding: 16px; min-height: 160px; }
   
   /* =========================
      Employee list/card
      ========================= */
   .employee-list { padding: 16px; max-height: 397px; overflow-y: auto; box-sizing: border-box; width: 100%; }
   .employee-card { margin-top: 20px; height: 397px; display: flex; flex-direction: column; }
   .employee-card .widget-body { flex: 1; min-height: 0; padding: 0; display: flex; flex-direction: column; }
   
   .employee-item {
     display: flex; justify-content: space-between; align-items: flex-end;
     gap: 12px; padding: 12px 0; border-bottom: 1px solid #eee; position: relative;
   }
   .employee-item:last-child { border-bottom: none; }
   
   .info .name { font-weight: 600; font-size: 15px; margin-bottom: 4px; }
   .info .detail { font-size: 13px; color: #555; }
   .info .extra { font-size: 12px; color: #888; margin-top: 2px; }
   .role { font-size: 13px; color: #4caf50; font-weight: 600; white-space: nowrap; margin-left: auto; }
   
   /* Ensure water drop inside right aside is inline (not fixed) */
   .right-aside .drop { position: static !important; top: auto !important; right: auto !important; z-index: auto !important; pointer-events: auto !important; }
   
   /* =========================
      Responsive
      ========================= */
   @media (max-width: 1200px){
     .dashboard-row, .dashboard-layout { grid-template-columns: 1fr; }
     .dashboard-row { margin-right: 12px; }
   }
   