<div class="leave-wrapper">
    <div class="form-container">
      <h1>員工請假系統</h1>

      <!-- 上方三欄 -->
      <div class="row-1">
        <div class="input-group">
          <h3>假別</h3>
          <select class="form-control" [(ngModel)]="leave.leaveType">
            <option value="">請選擇假別</option>
            <option value="事假">事假</option>
            <option value="婚假">婚假</option>
            <option value="病假">病假</option>
            <option value="產假">產假</option>
            <option value="生理假">生理假</option>
            <option value="公假">公假</option>
            <option value="特休">特休</option>
            <option value="其他">其他</option>
          </select>
        </div>

        <div class="input-group">
          <h3>請假事由</h3>
          <input class="form-control" [(ngModel)]="leave.leaveDescription" required />
        </div>

        <div class="input-group">
          <h3>請假時數</h3>
          <input type="number" class="form-control" [(ngModel)]="leave.totalHours" required />
        </div>
      </div>

      <!-- 上傳檔案 -->
   <div class="upload-section">
  <h3>上傳請假證明</h3>
  <!-- 移除 multiple，只能傳一張 -->
  <input type="file" (change)="onFileSelected($event)" accept="image/*" />

  @if(previewUrl) {
    <div class="preview-box">
      <p>預覽：</p>
      <div class="preview-item">
        <img [src]="previewUrl" />
        <button type="button" class="btn btn-danger" (click)="removeFile()">取消</button>
      </div>
    </div>
  }
</div>

      <!-- 請假時間段 -->
      <div class="period-section">
        <div class="section-header">
          <h3>請假時間段</h3>
          <button class="btn btn-add" (click)="addPeriod()">＋ 新增時間段</button>
        </div>

        @for(item of period; track $index) {
          <div class="time-segment-row">
            <div class="input-group">
              <label>請假日期</label>
              <input type="date" class="form-control" [(ngModel)]="item.leave" />
            </div>

            <div class="input-group">
              <label>開始時間</label>
              <input type="time" class="form-control" [(ngModel)]="item.startTime" />
            </div>

            <div class="input-group">
              <label>結束時間</label>
              <input type="time" class="form-control" [(ngModel)]="item.endTime" />
            </div>

            <div class="botton">
              <button class="btn btn-danger" (click)="deletePeriod($index)">刪除</button>
            </div>
          </div>
        }
      </div>

      <!-- 送出 -->
      <div class="submit-row">
         <button class="btn btn-primary" (click)="sendJSON1()">取消申請</button>
        <button class="btn btn-primary" (click)="sendJSON()">送出申請</button>
      </div>
    </div>
  </div>
